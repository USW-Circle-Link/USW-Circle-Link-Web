"use strict";(self["webpackChunkdonggurami"]=self["webpackChunkdonggurami"]||[]).push([[977],{3977:function(s,o,e){e.r(o),e.d(o,{default:function(){return ts}});var i=e(6768),t=e(5130),a=e(4232);const l={class:"form-container"},r={class:"form-group-col"},d={class:"form-group-row"},c=["disabled"],n={class:"form-group-col"},u={class:"form-group-row"},p={key:0,class:"warning"},h={class:"form-group-col"},m={class:"form-group-row"},b={key:0,class:"warning"},C={class:"form-group-col"},k={class:"form-group-row"},w=["disabled"],v={class:"form-group"},f={class:"dropdown-selected"},N={key:0,class:"dropdown-options"},P=["onClick"],V={class:"form-group-col"},g={class:"form-group-row"},E={key:0,class:"warning"},L=["disabled"],A={key:1,class:"popup-overlay"},R={class:"popup"},D={class:"popup-message"},y={class:"popup-warning"},B={class:"popup-buttons"},I={key:2,class:"modal-overlay"},F={class:"modal-content"},_={class:"modal-header"},M={class:"modal-body"},O={class:"floor-selector-container"},X={class:"floor-selector"},$=["onClick"],S={class:"room-container"},T={class:"rooms-wrapper"},U={class:"room-grid"},Q=["onClick"],x={class:"modal-footer"};function z(s,o,e,z,J,Z){const K=(0,i.g2)("DuplicateCheckPopup"),W=(0,i.g2)("Popup401");return(0,i.uX)(),(0,i.CE)(i.FK,null,[o[32]||(o[32]=(0,i.Lk)("div",{class:"title"},"동아리 추가",-1)),(0,i.Lk)("div",l,[(0,i.Lk)("div",r,[(0,i.Lk)("div",d,[o[20]||(o[20]=(0,i.Lk)("label",{for:"id"},"아이디",-1)),(0,i.bo)((0,i.Lk)("input",{class:"from-input",type:"text",id:"id","onUpdate:modelValue":o[0]||(o[0]=s=>J.id=s),placeholder:"아이디 (5~20자 이내 영어, 숫자)",onInput:o[1]||(o[1]=(...s)=>Z.validateId&&Z.validateId(...s))},null,544),[[t.Jo,J.id]]),(0,i.Lk)("button",{class:"DuplicateCheckbtn",onClick:o[2]||(o[2]=(...s)=>Z.idDuplicateCheck&&Z.idDuplicateCheck(...s)),disabled:!Z.isIdValid}," 중복 확인 ",8,c)]),J.idError?((0,i.uX)(),(0,i.CE)("span",{key:0,style:(0,a.Tr)(Z.getStyleId),class:"warning"},(0,a.v_)(J.idError),5)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",n,[(0,i.Lk)("div",u,[o[21]||(o[21]=(0,i.Lk)("label",{for:"password"},"비밀번호",-1)),(0,i.bo)((0,i.Lk)("input",{class:"from-input",type:"password",id:"password","onUpdate:modelValue":o[3]||(o[3]=s=>J.password=s),placeholder:"비밀번호 (영어, 숫자, 특수문자 포함 8~20자)",onInput:o[4]||(o[4]=(...s)=>Z.validatePassword&&Z.validatePassword(...s))},null,544),[[t.Jo,J.password]])]),J.passwordError?((0,i.uX)(),(0,i.CE)("span",p,(0,a.v_)(J.passwordError),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",h,[(0,i.Lk)("div",m,[o[22]||(o[22]=(0,i.Lk)("label",{for:"confirmPassword"},"비밀번호 확인",-1)),(0,i.bo)((0,i.Lk)("input",{class:"from-input",type:"password",id:"confirmPassword","onUpdate:modelValue":o[5]||(o[5]=s=>J.confirmPassword=s),placeholder:"비밀번호 (영어, 숫자, 특수문자 포함 8~20자)",onInput:o[6]||(o[6]=(...s)=>Z.validateConfirmPassword&&Z.validateConfirmPassword(...s)),onFocus:o[7]||(o[7]=(...s)=>Z.handleConfirmPasswordFocus&&Z.handleConfirmPasswordFocus(...s))},null,544),[[t.Jo,J.confirmPassword]])]),J.confirmPasswordError?((0,i.uX)(),(0,i.CE)("span",b,(0,a.v_)(J.confirmPasswordError),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",C,[(0,i.Lk)("div",k,[o[23]||(o[23]=(0,i.Lk)("label",{for:"clubName"},"동아리 이름",-1)),(0,i.bo)((0,i.Lk)("input",{class:"from-input",type:"text",id:"clubName","onUpdate:modelValue":o[8]||(o[8]=s=>J.clubName=s),placeholder:"동아리 이름 (10자 이내)",onInput:o[9]||(o[9]=(...s)=>Z.validateClubName&&Z.validateClubName(...s))},null,544),[[t.Jo,J.clubName]]),(0,i.Lk)("button",{class:"DuplicateCheckbtn",onClick:o[10]||(o[10]=(...s)=>Z.clubNameDuplicateCheck&&Z.clubNameDuplicateCheck(...s)),disabled:!Z.isClubNameValid}," 중복 확인 ",8,w)]),J.clubNameError?((0,i.uX)(),(0,i.CE)("span",{key:0,style:(0,a.Tr)(Z.getStyleClubName),class:"warning"},(0,a.v_)(J.clubNameError),5)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",v,[o[25]||(o[25]=(0,i.Lk)("label",{for:"clubName"},"분과",-1)),(0,i.Lk)("div",{class:"custom-dropdown",onClick:o[11]||(o[11]=(...s)=>Z.toggleDropdown&&Z.toggleDropdown(...s))},[(0,i.Lk)("div",f,(0,a.v_)(J.selectedOption||"미선택"),1),o[24]||(o[24]=(0,i.Lk)("span",{class:"dropdown-icon"},"▾",-1)),J.isOpen?((0,i.uX)(),(0,i.CE)("ul",N,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(J.options,s=>((0,i.uX)(),(0,i.CE)("li",{key:s,class:(0,a.C4)({"dropdown-option-selected":s===J.selectedOption}),onClick:o=>Z.selectOption(s)},(0,a.v_)(s),11,P))),128))])):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",V,[(0,i.Lk)("div",g,[o[27]||(o[27]=(0,i.Lk)("label",{for:"clubName"},"동아리방",-1)),(0,i.Lk)("button",{class:"club-room-btn",onClick:o[12]||(o[12]=(...s)=>Z.selectClubRoom&&Z.selectClubRoom(...s))},o[26]||(o[26]=[(0,i.Lk)("svg",{width:"15",height:"18",viewBox:"0 0 10 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,i.Lk)("path",{d:"M9.5 5C9.5 8.5 5 11.5 5 11.5C5 11.5 0.5 8.5 0.5 5C0.5 3.80653 0.974106 2.66193 1.81802 1.81802C2.66193 0.974106 3.80653 0.5 5 0.5C6.19347 0.5 7.33807 0.974106 8.18198 1.81802C9.02589 2.66193 9.5 3.80653 9.5 5Z",stroke:"#5A5A5A","stroke-linecap":"round","stroke-linejoin":"round"}),(0,i.Lk)("path",{d:"M5 6.5C5.82843 6.5 6.5 5.82843 6.5 5C6.5 4.17157 5.82843 3.5 5 3.5C4.17157 3.5 3.5 4.17157 3.5 5C3.5 5.82843 4.17157 6.5 5 6.5Z",stroke:"#5A5A5A","stroke-linecap":"round","stroke-linejoin":"round"})],-1),(0,i.eW)(" 동아리방 선택 ")])),(0,i.bo)((0,i.Lk)("input",{class:"club-room","onUpdate:modelValue":o[13]||(o[13]=s=>Z.displayRoomNumber=s),readonly:""},null,512),[[t.Jo,Z.displayRoomNumber]])]),J.clubRoomError?((0,i.uX)(),(0,i.CE)("span",E,(0,a.v_)(J.clubRoomError),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("button",{class:(0,a.C4)(["popupbtn",{disabled:!Z.isFormValid}]),disabled:!Z.isFormValid,onClick:o[14]||(o[14]=(...s)=>Z.openPopup&&Z.openPopup(...s))}," 추가하기 ",10,L),J.showPopup?((0,i.uX)(),(0,i.Wv)(K,{key:0,serverMessage:J.serverMessage,onClose:Z.closeResultPopup},null,8,["serverMessage","onClose"])):(0,i.Q3)("",!0),J.AddClubPopupVisible?((0,i.uX)(),(0,i.CE)("div",A,[(0,i.Lk)("div",R,[o[28]||(o[28]=(0,i.Lk)("h3",null,"동아리 추가",-1)),o[29]||(o[29]=(0,i.Lk)("div",{class:"line33"},null,-1)),(0,i.Lk)("p",D,"'"+(0,a.v_)(J.clubName)+"'을(를) 추가하시겠습니까?",1),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":o[15]||(o[15]=s=>J.adminPw=s),type:"password",placeholder:"관리자 비밀번호"},null,512),[[t.Jo,J.adminPw]]),(0,i.Lk)("p",y,(0,a.v_)(J.adminPwError),1),(0,i.Lk)("div",B,[(0,i.Lk)("button",{class:"cancel-button",onClick:o[16]||(o[16]=(...s)=>Z.cancelDelete&&Z.cancelDelete(...s))},"취소"),(0,i.Lk)("button",{class:"expel-button",onClick:o[17]||(o[17]=(...s)=>Z.submitForm&&Z.submitForm(...s))},"확인")])])])):(0,i.Q3)("",!0),J.ClubRoomPopupVisible?((0,i.uX)(),(0,i.CE)("div",I,[(0,i.Lk)("div",F,[(0,i.Lk)("div",_,[o[31]||(o[31]=(0,i.Lk)("h3",null,"동아리방 선택하기",-1)),(0,i.Lk)("button",{class:"close-button",onClick:o[18]||(o[18]=(...s)=>Z.closeSelectRoom&&Z.closeSelectRoom(...s))},o[30]||(o[30]=[(0,i.Fv)('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none" data-v-264dac97><g clip-path="url(#clip0_4722_18717)" data-v-264dac97><path d="M17.3588 0.643066L0.644531 17.3574M0.644531 0.643066L17.3588 17.3574" stroke="#969696" stroke-linecap="round" stroke-linejoin="round" data-v-264dac97></path></g><defs data-v-264dac97><clipPath id="clip0_4722_18717" data-v-264dac97><rect width="18" height="18" fill="white" data-v-264dac97></rect></clipPath></defs></svg>',1)]))]),(0,i.Lk)("div",M,[(0,i.Lk)("div",O,[(0,i.Lk)("div",X,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(J.floors,s=>((0,i.uX)(),(0,i.CE)("button",{key:s,class:(0,a.C4)(["floor-button",{active:J.selectedFloor===s}]),onClick:o=>J.selectedFloor=s},(0,a.v_)(s),11,$))),128))])]),(0,i.Lk)("div",S,[(0,i.Lk)("div",T,[(0,i.Lk)("div",U,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(Z.roomsByFloor,s=>((0,i.uX)(),(0,i.CE)("button",{key:s,class:(0,a.C4)(["room-button",{active:J.selectedRoom===s}]),onClick:o=>J.selectedRoom=s},(0,a.v_)(s)+"호 ",11,Q))),128))])])])]),(0,i.Lk)("div",x,[(0,i.Lk)("button",{class:"select-button",onClick:o[19]||(o[19]=(...s)=>Z.selectRoom&&Z.selectRoom(...s))},"선택하기")])])])):(0,i.Q3)("",!0)]),J.show401Popup?((0,i.uX)(),(0,i.Wv)(W,{key:0})):(0,i.Q3)("",!0)],64)}var J=e(4373),Z=e(5968),K=e(3657);const W={class:"popup-overlay"},j={class:"popup"},G={class:"confirm-message"};function q(s,o,e,t,l,r){return(0,i.uX)(),(0,i.CE)("div",W,[(0,i.Lk)("div",j,[(0,i.Lk)("p",G,(0,a.v_)(r.message),1),(0,i.Lk)("button",{onClick:o[0]||(o[0]=(...s)=>r.DuplicateCheckSuccess&&r.DuplicateCheckSuccess(...s)),class:"confirm-button"},"확인")])])}var H={name:"AddCategoryPopup",props:{serverMessage:{type:String,required:!0}},computed:{message(){return this.serverMessage}},methods:{DuplicateCheckSuccess(){if("사용 가능한 아이디입니다."===this.message){const s="* 중복확인 완료",o=!0;this.$emit("close",s,o)}else if("사용 가능한 동아리 이름입니다."===this.message){const s="* 중복확인 완료",o=!1;this.$emit("close",s,o)}}}},Y=e(1241);const ss=(0,Y.A)(H,[["render",q],["__scopeId","data-v-425c3cf2"]]);var os=ss,es={components:{DuplicateCheckPopup:os,Popup401:K.A},data(){return{id:"",password:"",confirmPassword:"",clubName:"",department:"",selectedRoom:"미선택",Room:"",formValidation:{idValid:!1,passwordValid:!1,passwordMatch:!1,clubNameValid:!1,departmentValid:!1,roomValid:!1},idError:"",passwordError:"",confirmPasswordError:"",clubNameError:"",clubRoomError:"",DuplicateCheckId:!1,DuplicateCheckClubName:!1,options:["학술","종교","예술","체육","공연","봉사"],selectedOption:null,isOpen:!1,AddClubPopupVisible:!1,ClubRoomPopupVisible:!1,showPopup:!1,serverMessage:"",adminPw:"",adminPwError:" ",floors:["지하","1층","2층"],selectedFloor:"1층",roomMap:{"지하":["B101","B102","B103","B104","B105","B106","B107","B108","B110","B111","B112","B113","B114","B115","B116","B117","B118","B119","B120","B121","B122","B123"],"1층":["102","103","104","105","106","107","108","109","110","111","112"],"2층":["203","205","206","207","208","209","210"]},isActiveId:!0,isActiveClubName:!0,isConfirmPasswordTouched:!1,show401Popup:!1}},computed:{isIdValid(){const s=/^[a-zA-Z0-9]{5,20}$/;return this.id&&s.test(this.id)},isClubNameValid(){return this.clubName&&!/\s/.test(this.clubName)&&this.clubName.length<=10},roomsByFloor(){return this.roomMap[this.selectedFloor]||[]},getStyleId(){return this.isActiveId?{color:"#FF4B4B"}:{color:"#48A661"}},getStyleClubName(){return this.isActiveClubName?{color:"#FF4B4B"}:{color:"#48A661"}},displayRoomNumber(){return this.selectedRoom&&"미선택"!==this.selectedRoom?`${this.selectedRoom}호`:this.selectedRoom},isFormValid(){const s=""!==this.id&&""!==this.password&&""!==this.confirmPassword&&""!==this.clubName&&null!==this.selectedOption&&"미선택"!==this.selectedRoom,o=this.formValidation.idValid&&this.formValidation.passwordValid&&this.formValidation.passwordMatch&&this.formValidation.clubNameValid&&this.formValidation.departmentValid&&this.formValidation.roomValid,e=this.DuplicateCheckId&&this.DuplicateCheckClubName;return s&&o&&e}},methods:{handle401Error(s){return!(!s.response||401!==s.response.status)&&(this.show401Popup=!0,!0)},navigateTo(s){this.$router.push({name:s}).catch(s=>{if("NavigationDuplicated"!==s.name)throw s})},validateId(){const s=/^[a-zA-Z0-9]{5,20}$/;this.id?s.test(this.id)?(this.formValidation.idValid=!0,this.DuplicateCheckId&&(this.DuplicateCheckId=!1,this.idError="* 중복 확인이 필요합니다.",this.isActiveId=!0)):(this.isActiveId=!0,this.idError="* 아이디는 5~20자 이내의 영어, 숫자로 작성해주세요.",this.formValidation.idValid=!1):(this.isActiveId=!0,this.idError="* 아이디를 입력해 주세요.",this.formValidation.idValid=!1)},validatePassword(){const s=/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[!@#$%^&*()_+])[a-zA-Z0-9!@#$%^&*()_+]{8,20}$/;this.password?s.test(this.password)?(this.passwordError="",this.formValidation.passwordValid=!0):(this.passwordError="* 비밀번호는 영어, 숫자, 특수문자를 모두 포함하여 8~20자 이내로 작성해주세요.",this.formValidation.passwordValid=!1):(this.passwordError="* 비밀번호를 입력해 주세요.",this.formValidation.passwordValid=!1),this.validateConfirmPassword()},validateClubName(){this.clubName?this.clubName.length>20?(this.isActiveClubName=!0,this.clubNameError="* 동아리 이름은 1~20자 이내 한글, 영어로 작성해주세요.",this.formValidation.clubNameValid=!1):/\s/.test(this.clubName)?(this.clubNameError="* 동아리명에는 공백 또는 특수문자를 포함할 수 없습니다.",this.formValidation.clubNameValid=!1):(this.formValidation.clubNameValid=!0,this.DuplicateCheckClubName&&(this.DuplicateCheckClubName=!1,this.clubNameError="* 중복 확인이 필요합니다.",this.isActiveClubName=!0)):(this.isActiveClubName=!0,this.clubNameError="* 동아리 이름을 입력해 주세요.",this.formValidation.clubNameValid=!1)},validateConfirmPassword(){this.isConfirmPasswordTouched?this.confirmPassword?this.password!==this.confirmPassword?(this.confirmPasswordError="* 비밀번호가 일치하지 않습니다.",this.formValidation.passwordMatch=!1):(this.confirmPasswordError="",this.formValidation.passwordMatch=!0):(this.confirmPasswordError="* 비밀번호 확인을 입력해 주세요.",this.formValidation.passwordMatch=!1):this.confirmPasswordError=""},handleConfirmPasswordFocus(){this.isConfirmPasswordTouched=!0,this.validateConfirmPassword()},async idDuplicateCheck(){if(""!==this.id){const o=Z.A.state.accessToken;try{await J.A.get(`${Z.A.state.apiBaseUrl}/admin/clubs/leader/check?leaderAccount=${this.id}`,{headers:{Authorization:`Bearer ${o}`}}),this.serverMessage="사용 가능한 아이디입니다.",this.showPopup=!0,this.DuplicateCheckId=!0}catch(s){const{code:o}=s.response?.data||{};this.handle401Error(s)||"CLDR-203"===o&&(this.isActiveId=!0,this.idError="* 이미 존재하는 아이디입니다.",this.DuplicateCheckId=!1)}}else this.isActiveId=!0,this.idError="* 아이디를 입력해 주세요."},async clubNameDuplicateCheck(){if(""!==this.clubName){const o=Z.A.state.accessToken;try{await J.A.get(`${Z.A.state.apiBaseUrl}/admin/clubs/name/check?clubName=${this.clubName}`,{headers:{Authorization:`Bearer ${o}`}}),this.serverMessage="사용 가능한 동아리 이름입니다.",this.showPopup=!0,this.DuplicateCheckClubName=!0}catch(s){const{code:o}=s.response?.data||{};this.handle401Error(s)||"CLUB-203"===o&&(this.isActiveClubName=!0,this.clubNameError="* 이미 존재하는 동아리 이름입니다.",this.DuplicateCheckClubName=!1)}}else this.isActiveClubName=!0,this.clubNameError="* 동아리 이름을 입력해 주세요."},openPopup(){!0===this.DuplicateCheckClubName&&!0===this.DuplicateCheckId&&""!==this.id&&""!==this.password&&""!==this.confirmPassword&&""!==this.clubName&&""!==this.selectedOption&&""!==this.selectedRoom?this.AddClubPopupVisible=!0:(alert("중복 확인 진행 및 빈칸을 모두 채워주세요."),console.log(this.DuplicateCheckClubName,this.DuplicateCheckId,this.id,this.password,this.confirmPassword,this.clubName,this.selectedOption,this.selectedRoom))},cancelDelete(){this.AddClubPopupVisible=!1},toggleDropdown(){this.isOpen=!this.isOpen},selectOption(s){this.selectedOption=s,this.formValidation.departmentValid=!0},async submitForm(){const s={"학술":"ACADEMIC","종교":"RELIGION","예술":"ART","체육":"SPORT","공연":"SHOW","봉사":"VOLUNTEER"};this.department=s[this.selectedOption]||null;const o={leaderAccount:this.id,leaderPw:this.password,leaderPwConfirm:this.password,clubName:this.clubName,department:this.department,adminPw:this.adminPw,clubRoomNumber:this.selectedRoom};try{await J.A.post(`${Z.A.state.apiBaseUrl}/admin/clubs`,o,{headers:{Authorization:`Bearer ${Z.A.state.accessToken}`}}),alert("성공적으로 추가했습니다."),this.navigateTo("clublist"),this.clearForm(),this.AddClubPopupVisible=!1}catch(e){const{code:s}=e.response?.data||{};this.handle401Error(e)||("ADM-202"===s?this.adminPwError="* 비밀번호를 다시 확인해주세요.":"CLDR-202"===s?this.confirmPasswordError="* 비밀번호가 일치하지 않습니다.":"CLDR-203"===s?this.idError="* 이미 존재하는 아이디입니다.":"CLUB-203"===s?this.clubNameError="* 이미 존재하는 동아리 이름입니다.":"BAD_REQUEST"===s?alert("학부 값은 필수입니다."):"INVALID_ARGUMENT"===s&&alert("예기치 못한 오류"))}},closeResultPopup(s,o){this.showPopup=!1,!0===o?(this.idError=s,this.isActiveId=!1,this.DuplicateCheckId=!0):!1===o&&(this.clubNameError=s,this.isActiveClubName=!1,this.DuplicateCheckClubName=!0)},clearForm(){this.id="",this.password="",this.confirmPassword="",this.clubName="",this.department="",this.adminPw=""},selectRoom(){this.selectedRoom&&"미선택"!==this.selectedRoom&&(this.formValidation.roomValid=!0,this.closeSelectRoom())},selectClubRoom(){this.ClubRoomPopupVisible=!0},closeSelectRoom(){this.ClubRoomPopupVisible=!1}},created(){this.formValidation={idValid:!1,passwordValid:!1,passwordMatch:!1,clubNameValid:!1,departmentValid:!1,roomValid:!1}}};const is=(0,Y.A)(es,[["render",z],["__scopeId","data-v-264dac97"]]);var ts=is}}]);
//# sourceMappingURL=977.b25f8e13.js.map