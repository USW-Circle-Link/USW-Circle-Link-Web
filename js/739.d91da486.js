"use strict";(self["webpackChunkdonggurami"]=self["webpackChunkdonggurami"]||[]).push([[739],{1739:function(t,e,a){a.r(e),a.d(e,{default:function(){return F}});var o=a(6768),i=a(4232),s=a(5039),n=a(6392);const c={class:"container"},r={class:"header"},l={key:0,class:"notice-details"},d={class:"meta-info"},u={class:"notice-title"},h={class:"meta-line"},g={class:"notice-meta"},k={class:"notice-date"},m=["innerHTML"],p={key:0,class:"notice-images"},v=["src","onError"],N={class:"notice-list"},P=["onClick"],I={class:"title-col"},L={class:"author-col"},C={class:"date-col"},U={class:"notice-cards"},f=["onClick"],A={class:"card-title"},b={class:"card-meta"},D={class:"card-author"},w={class:"card-date"},E={class:"pagination"},T=["disabled"],$=["onClick"],y=["disabled"];function x(t,e,a,x,X,_){const B=(0,o.g2)("Popup401");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",c,[(0,o.Lk)("div",r,[(0,o.Lk)("button",{class:"nav-button",onClick:e[0]||(e[0]=(...t)=>_.prevNotice&&_.prevNotice(...t))},e[4]||(e[4]=[(0,o.Lk)("img",{src:s,alt:"Previous",class:"nav-icon"},null,-1),(0,o.eW)(" 이전 공지 ")])),(0,o.Lk)("button",{class:"nav-button",onClick:e[1]||(e[1]=(...t)=>_.nextNotice&&_.nextNotice(...t))},e[5]||(e[5]=[(0,o.eW)(" 다음 공지 "),(0,o.Lk)("img",{src:n,alt:"Next",class:"nav-icon"},null,-1)]))]),X.notice?((0,o.uX)(),(0,o.CE)("div",l,[(0,o.Lk)("div",d,[(0,o.Lk)("h1",u,(0,i.v_)(X.notice.noticeTitle),1),(0,o.Lk)("div",h,[(0,o.Lk)("span",g,(0,i.v_)(X.notice.adminName),1),(0,o.Lk)("span",k,(0,i.v_)(_.formattedDate(X.notice.noticeCreatedAt)),1)])]),(0,o.Lk)("div",{class:"notice-content",innerHTML:_.convertNewlinesToBr(X.notice.noticeContent)},null,8,m),X.images.length>0?((0,o.uX)(),(0,o.CE)("div",p,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(X.images,(t,e)=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"image-container"},[(0,o.Lk)("img",{src:t.src,alt:"Notice Image",class:"notice-image",onError:t=>_.handleImageError(e)},null,40,v)]))),128))])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0),(0,o.Lk)("div",N,[(0,o.Lk)("table",null,[(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(X.notices,t=>((0,o.uX)(),(0,o.CE)("tr",{key:t.noticeUUID,onClick:e=>_.goToNotice(t.noticeUUID),class:(0,i.C4)({"current-notice":X.notice&&t.noticeUUID===X.notice.noticeUUID})},[(0,o.Lk)("td",I,(0,i.v_)(t.noticeTitle),1),(0,o.Lk)("td",L,(0,i.v_)(t.adminName),1),(0,o.Lk)("td",C,(0,i.v_)(_.formattedDate(t.noticeCreatedAt)),1)],10,P))),128))])]),(0,o.Lk)("div",U,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(X.notices,t=>((0,o.uX)(),(0,o.CE)("div",{key:t.noticeUUID,class:(0,i.C4)(["notice-card",{"current-notice":X.notice&&t.noticeUUID===X.notice.noticeUUID}]),onClick:e=>_.goToNotice(t.noticeUUID)},[(0,o.Lk)("div",A,(0,i.v_)(t.noticeTitle),1),(0,o.Lk)("div",b,[(0,o.Lk)("span",D,(0,i.v_)(t.adminName),1),(0,o.Lk)("span",w,(0,i.v_)(_.formattedDate(t.noticeCreatedAt)),1)])],10,f))),128))]),(0,o.Lk)("div",E,[(0,o.Lk)("button",{onClick:e[2]||(e[2]=t=>_.changePage(X.currentPage-1)),disabled:1===X.currentPage,class:"pagination-button"},e[6]||(e[6]=[(0,o.Lk)("img",{src:s,alt:"Previous",class:"pagination-icon"},null,-1)]),8,T),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(X.totalPages,t=>((0,o.uX)(),(0,o.CE)("span",{key:t,onClick:e=>_.changePage(t),class:(0,i.C4)([{active:t===X.currentPage},"pagination-number"])},(0,i.v_)(t),11,$))),128)),(0,o.Lk)("button",{onClick:e[3]||(e[3]=t=>_.changePage(X.currentPage+1)),disabled:X.currentPage===X.totalPages,class:"pagination-button"},e[7]||(e[7]=[(0,o.Lk)("img",{src:n,alt:"Next",class:"pagination-icon"},null,-1)]),8,y)])])]),X.show401Popup?((0,o.uX)(),(0,o.Wv)(B,{key:0})):(0,o.Q3)("",!0)],64)}var X=a(5968),_=a(4373),B=a(6799),z={components:{Popup401:B.A},data(){return{notices:[],notice:null,currentPage:1,totalPages:1,itemsPerPage:5,images:[],show401Popup:!1,totalNotices:1,currentNoticeIndex:0}},created(){this.fetchNotices(),this.fetchNotice(this.$route.params.noticeUUID)},mounted(){this.initializePage()},methods:{initializePage(){const t=null===localStorage.getItem("firstVisit"),e=sessionStorage.getItem("reloaded");t?(localStorage.setItem("firstVisit","true"),sessionStorage.setItem("reloaded","true"),window.location.reload()):e?sessionStorage.removeItem("reloaded"):(sessionStorage.setItem("reloaded","true"),window.location.reload())},handle401Error(t){return!(!t.response||401!==t.response.status)&&(this.show401Popup=!0,!0)},convertNewlinesToBr(t){return t?t.replace(/\n/g,"<br>"):""},async fetchNotices(){try{const t=X.A.state.accessToken,e=Math.max(this.currentPage-1,0),a=this.itemsPerPage,o=await _.A.get(`${X.A.state.apiBaseUrl}/notices?page=${e}&size=${a}`,{headers:{Authorization:`Bearer ${t}`}});o.data.data&&o.data.data.content?(this.notices=o.data.data.content,this.totalPages=o.data.data.totalPages||1,this.totalNotices=o.data.data.totalElements||1):this.notices=[]}catch(t){this.handle401Error(t)}},async fetchNotice(t){try{const e=await _.A.get(`${X.A.state.apiBaseUrl}/notices/${t}`,{headers:{Authorization:`Bearer ${X.A.state.accessToken}`}});if(e.data&&e.data.data){this.notice=e.data.data;const a=await _.A.get(`${X.A.state.apiBaseUrl}/notices?page=0&size=${this.totalNotices||999}`,{headers:{Authorization:`Bearer ${X.A.state.accessToken}`}});if(a.data.data.content){const e=a.data.data.content;this.currentNoticeIndex=e.findIndex(e=>e.noticeUUID===t);const o=Math.floor(this.currentNoticeIndex/this.itemsPerPage)+1;this.currentPage!==o&&(this.currentPage=o,this.fetchNotices())}e.data.data.noticePhotos&&e.data.data.noticePhotos.length>0?this.images=e.data.data.noticePhotos.map(t=>({src:t})):this.images=[]}}catch(e){console.error("공지사항 상세 정보를 불러오기 실패:",e)}},handleImageError(t){this.images[t].src=a(6392)},async fetchAndGoToNotice(t){try{const e=await _.A.get(`${X.A.state.apiBaseUrl}/notices?page=0&size=${this.totalNotices||999}`,{headers:{Authorization:`Bearer ${X.A.state.accessToken}`}}),a=e.data.data.content;a&&a[t]&&this.goToNotice(a[t].noticeUUID)}catch(e){console.error("이전/다음 공지사항 로드 실패",e)}},prevNotice(){const t=(this.currentNoticeIndex-1+this.totalNotices)%this.totalNotices;this.fetchAndGoToNotice(t)},nextNotice(){const t=(this.currentNoticeIndex+1)%this.totalNotices;this.fetchAndGoToNotice(t)},async changePage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t,await this.fetchNotices())},goToNotice(t){this.$router.push({name:"NoticeClick",params:{noticeUUID:t}})},formattedDate(t){return new Date(t).toLocaleDateString("ko-KR")}},watch:{$route(t){this.fetchNotice(t.params.noticeUUID)}}},S=a(1241);const K=(0,S.A)(z,[["render",x],["__scopeId","data-v-57f2037b"]]);var F=K}}]);
//# sourceMappingURL=739.d91da486.js.map