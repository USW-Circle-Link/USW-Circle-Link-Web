{"version":3,"file":"js/549.c1551f43.js","mappings":"qNACOA,MAAM,a,GACJA,MAAM,Y,GAEJA,MAAM,W,aAcDA,MAAM,gB,iBAKNA,MAAM,iB,GACNA,MAAM,e,GAITA,MAAM,c,uIA3BjBC,EAAAA,EAAAA,IAqDM,MArDNC,EAqDM,EApDJD,EAAAA,EAAAA,IAmDM,MAnDNE,EAmDM,C,aAlDJF,EAAAA,EAAAA,IAA2B,MAAvBD,MAAM,SAAQ,QAAI,KACtBC,EAAAA,EAAAA,IAgDM,MAhDNG,EAgDM,EA/CJH,EAAAA,EAAAA,IAsBQ,c,aArBNA,EAAAA,EAAAA,IAMQ,eALRA,EAAAA,EAAAA,IAIK,YAHHA,EAAAA,EAAAA,IAAgC,MAA5BD,MAAM,gBAAe,OACzBC,EAAAA,EAAAA,IAAkC,MAA9BD,MAAM,iBAAgB,QAC1BC,EAAAA,EAAAA,IAAgC,MAA5BD,MAAM,eAAc,W,KAG1BC,EAAAA,EAAAA,IAaQ,cAZqB,IAAnBI,EAAAC,QAAQC,S,WAAlBC,EAAAA,EAAAA,IAEK,KAAAC,EAAAC,EAAA,KAAAA,EAAA,KADHT,EAAAA,EAAAA,IAAgC,MAA5BU,QAAQ,KAAI,eAAW,Q,8BAE7BH,EAAAA,EAAAA,IAQKI,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IARgBR,EAAAC,QAAVQ,K,WAAXN,EAAAA,EAAAA,IAQK,MAR0BO,IAAKD,EAAOE,Y,EACzCf,EAAAA,EAAAA,IAIK,KAJLgB,EAIK,EAHHhB,EAAAA,EAAAA,IAES,UAFAiB,QAAKC,GAAEC,EAAAC,WAAWP,EAAOE,WAAYF,EAAOQ,WAAYtB,MAAM,iB,QAClEc,EAAOS,aAAW,EAAAC,MAGzBvB,EAAAA,EAAAA,IAAqD,KAArDwB,GAAqDC,EAAAA,EAAAA,IAAxBZ,EAAOQ,WAAS,IAC7CrB,EAAAA,EAAAA,IAA+F,KAA/F0B,GAA+FD,EAAAA,EAAAA,IAAA,IAAhEE,KAAKd,EAAOe,iBAAiBC,mBAAmB,UAAD,O,WAIlF7B,EAAAA,EAAAA,IAuBM,MAvBN8B,EAuBM,EAtBJ9B,EAAAA,EAAAA,IAMS,UALJiB,QAAKR,EAAA,KAAAA,EAAA,OAAAsB,IAAEZ,EAAAa,eAAAb,EAAAa,iBAAAD,IACPE,UAAWd,EAAAe,cACZnC,MAAM,gB,cAERC,EAAAA,EAAAA,IAA8C,OAAzCmC,IAAAC,EAAwBC,IAAI,Y,+BAEnC9B,EAAAA,EAAAA,IAOSI,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IANUO,EAAAmB,gBAARC,K,WADXhC,EAAAA,EAAAA,IAOS,UALJO,IAAKyB,EACLtB,QAAKC,GAAEC,EAAAqB,WAAWD,GAClBxC,OAAK0C,EAAAA,EAAAA,IAAA,CAAAC,OAAYtC,EAAAuC,cAAgBJ,M,QAEjCA,GAAI,GAAAK,K,OAET5C,EAAAA,EAAAA,IAMS,UALJiB,QAAKR,EAAA,KAAAA,EAAA,OAAAsB,IAAEZ,EAAA0B,eAAA1B,EAAA0B,iBAAAd,IACPE,UAAWd,EAAA2B,cACZ/C,MAAM,gB,cAERC,EAAAA,EAAAA,IAA2C,OAAtCmC,IAAAY,EAAyBV,IAAI,Q,wBAM5BjC,EAAA4C,e,WAAhBC,EAAAA,EAAAA,IAAgCC,EAAA,CAAApC,IAAA,M,4CAOlC,GACEqC,WAAY,CACVC,SAAQA,EAAAA,GAEVC,IAAAA,GACE,MAAO,CACLhD,QAAS,GACTsC,YAAa,EACbW,aAAc,GACdC,WAAY,EACZP,cAAc,EACdQ,cAAe,EAEnB,EACAC,SAAU,CACRC,gBAAAA,GACE,OAAOC,KAAKC,KAAKC,KAAKlB,YAAckB,KAAKL,cAC3C,EACAM,SAAAA,GACE,OAAQD,KAAKH,iBAAmB,GAAKG,KAAKL,cAAgB,CAC5D,EACAO,OAAAA,GACE,MAAMC,EAAMH,KAAKC,UAAYD,KAAKL,cAAgB,EAClD,OAAOG,KAAKM,IAAID,EAAKH,KAAKN,WAC5B,EACAjB,eAAAA,GACE,IAAI4B,EAAQ,GACZ,IAAK,IAAIC,EAAIN,KAAKC,UAAWK,GAAKN,KAAKE,QAASI,IAC9CD,EAAME,KAAKD,GAEb,OAAOD,CACT,EACApB,aAAAA,GACE,OAAOe,KAAKE,QAAUF,KAAKN,UAC7B,EACArB,aAAAA,GACE,OAAO2B,KAAKC,UAAY,CAC1B,GAEFO,OAAAA,GACER,KAAKS,gBACP,EACAC,QAAS,CACPD,cAAAA,GACE,MAAME,EAAsD,OAAvCC,aAAaC,QAAQ,cACpCC,EAAWC,eAAeF,QAAQ,YAEpCF,GACFC,aAAaI,QAAQ,aAAc,QACnCD,eAAeC,QAAQ,WAAY,QACnCC,OAAOC,SAASC,UACNL,EAIVC,eAAeK,WAAW,aAH1BL,eAAeC,QAAQ,WAAY,QACnCC,OAAOC,SAASC,SAIpB,EACA,kBAAME,GAEWvB,KAAKwB,IAAItB,KAAKP,aAAc,GACzBK,KAAKwB,IAAItB,KAAKlB,YAAc,EAAG,GAEjD,IACE,MAAMyC,EAAcC,EAAAA,EAAMC,MAAMF,YAC1BG,QAAiBC,MACnB,GAAGH,EAAAA,EAAMC,MAAMG,2BAA2B5B,KAAKlB,YAAc,UAAUkB,KAAKP,eAC5E,CACEoC,OAAQ,MACRC,QAAS,CACP,eAAgB,mBAChB,cAAiB,UAAUP,OAKnC,GAAwB,MAApBG,EAASK,OAEX,YADA/B,KAAKb,cAAe,GAItB,MAAMK,QAAakC,EAASM,OAExBxC,GAAQA,EAAKA,OACfQ,KAAKxD,QAAUyF,MAAMC,QAAQ1C,EAAKA,KAAK2C,SAAW3C,EAAKA,KAAK2C,QAAU,GAClE3C,EAAKA,KAAK4C,gBACZpC,KAAKN,WAAaI,KAAKC,KAAKP,EAAKA,KAAK4C,cAAgBpC,KAAKP,eAGjE,CAAE,MAAO4C,GACPC,QAAQD,MAAM,4BAA6BA,GAC3CrC,KAAKxD,QAAU,EACjB,CACF,EACAe,UAAAA,CAAWL,GACT,MAAMqF,EAAcvC,KAAKwC,OAAOC,KAC5BF,EAAYG,WAAW,cACzB1C,KAAK2C,QAAQpC,KAAK,CAAEqC,KAAM,mBAAoBC,OAAQ,CAAE3F,WAAYA,IAIxE,EACAyB,UAAAA,CAAWD,GACLA,GAAQ,GAAKA,GAAQsB,KAAKN,aAC5BM,KAAKlB,YAAcJ,EACnBsB,KAAKqB,eAET,EACAyB,YAAAA,GACM9C,KAAKlB,YAAc,GACrBkB,KAAKrB,WAAWqB,KAAKlB,YAAc,EAEvC,EACAiE,QAAAA,GACM/C,KAAKlB,YAAckB,KAAKN,YAC1BM,KAAKrB,WAAWqB,KAAKlB,YAAc,EAEvC,EACAE,aAAAA,GACMgB,KAAKf,eACPe,KAAKrB,WAAWqB,KAAKE,QAAU,EAEnC,EACA/B,aAAAA,GACM6B,KAAK3B,eACP2B,KAAKrB,WAAWqB,KAAKC,UAAY,EAErC,GAEF+C,OAAAA,GACEhD,KAAKqB,cACP,G,UC1LF,MAAM4B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://donggurami/./src/components/Admin/notice.vue","webpack://donggurami/./src/components/Admin/notice.vue?ccc0"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"contents\">\r\n      <h2 class=\"title\">공지사항</h2>\r\n      <div class=\"notices\">\r\n        <table>\r\n          <thead>\r\n          <tr>\r\n            <th class=\"title-column\">제목</th>\r\n            <th class=\"author-column\">작성자</th>\r\n            <th class=\"date-column\">작성일</th>\r\n          </tr>\r\n          </thead>\r\n          <tbody>\r\n          <tr v-if=\"notices.length === 0\">\r\n            <td colspan=\"3\">공지사항이 없습니다.</td>\r\n          </tr>\r\n          <tr v-for=\"notice in notices\" :key=\"notice.noticeUUID\">\r\n            <td class=\"title-column\">\r\n              <button @click=\"goToNotice(notice.noticeUUID, notice.adminName)\" class=\"title-button\">\r\n                {{ notice.noticeTitle }}\r\n              </button>\r\n            </td>\r\n            <td class=\"author-column\">{{ notice.adminName }}</td>\r\n            <td class=\"date-column\">{{ new Date(notice.noticeCreatedAt).toLocaleDateString('ko-KR') }}</td>\r\n          </tr>\r\n          </tbody>\r\n        </table>\r\n        <div class=\"pagination\">\r\n          <button\r\n              @click=\"prevPageGroup\"\r\n              :disabled=\"!showPrevGroup\"\r\n              class=\"arrow-button\"\r\n          >\r\n            <img src=\"@/assets/left.png\" alt=\"Previous\" />\r\n          </button>\r\n          <button\r\n              v-for=\"page in totalPagesArray\"\r\n              :key=\"page\"\r\n              @click=\"changePage(page)\"\r\n              :class=\"{ active: currentPage === page }\"\r\n          >\r\n            {{ page }}\r\n          </button>\r\n          <button\r\n              @click=\"nextPageGroup\"\r\n              :disabled=\"!showNextGroup\"\r\n              class=\"arrow-button\"\r\n          >\r\n            <img src=\"@/assets/rigth.png\" alt=\"Next\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <Popup401 v-if=\"show401Popup\" />\r\n</template>\r\n\r\n<script>\r\nimport store from '@/store/store';\r\nimport Popup401 from './401Popup.vue';\r\n\r\nexport default {\r\n  components: {\r\n    Popup401\r\n  },\r\n  data() {\r\n    return {\r\n      notices: [],\r\n      currentPage: 1,\r\n      itemsPerPage: 12,\r\n      totalPages: 1,\r\n      show401Popup: false,\r\n      pageGroupSize: 5  // 페이지 그룹 크기 추가\r\n    };\r\n  },\r\n  computed: {\r\n    currentPageGroup() {\r\n      return Math.ceil(this.currentPage / this.pageGroupSize);\r\n    },\r\n    startPage() {\r\n      return (this.currentPageGroup - 1) * this.pageGroupSize + 1;\r\n    },\r\n    endPage() {\r\n      const end = this.startPage + this.pageGroupSize - 1;\r\n      return Math.min(end, this.totalPages);\r\n    },\r\n    totalPagesArray() {\r\n      let pages = [];\r\n      for (let i = this.startPage; i <= this.endPage; i++) {\r\n        pages.push(i);\r\n      }\r\n      return pages;\r\n    },\r\n    showNextGroup() {\r\n      return this.endPage < this.totalPages;\r\n    },\r\n    showPrevGroup() {\r\n      return this.startPage > 1;\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initializePage();\r\n  },\r\n  methods: {\r\n    initializePage() {\r\n      const isFirstVisit = localStorage.getItem(\"firstVisit\") === null;\r\n      const reloaded = sessionStorage.getItem(\"reloaded\");\r\n\r\n      if (isFirstVisit) {\r\n        localStorage.setItem(\"firstVisit\", \"true\");\r\n        sessionStorage.setItem(\"reloaded\", \"true\");\r\n        window.location.reload();\r\n      } else if (!reloaded) {\r\n        sessionStorage.setItem(\"reloaded\", \"true\");\r\n        window.location.reload();\r\n      } else {\r\n        sessionStorage.removeItem(\"reloaded\");\r\n      }\r\n    },\r\n    async fetchNotices() {\r\n       //최소 `size=1`로 설정하여 백엔드 에러 방지\r\n    const pageSize = Math.max(this.itemsPerPage, 1); // 최소값 보장\r\n    const currentPage = Math.max(this.currentPage - 1, 0); // 최소값 보장\r\n\r\n      try {\r\n        const accessToken = store.state.accessToken;\r\n        const response = await fetch(\r\n            `${store.state.apiBaseUrl}/notices?page=${this.currentPage - 1}&size=${this.itemsPerPage}`,\r\n            {\r\n              method: 'GET',\r\n              headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${accessToken}`,\r\n              },\r\n            }\r\n        );\r\n\r\n        if (response.status === 401) {\r\n          this.show401Popup = true;\r\n          return;\r\n        }\r\n\r\n        const data = await response.json();\r\n\r\n        if (data && data.data) {\r\n          this.notices = Array.isArray(data.data.content) ? data.data.content : [];\r\n          if (data.data.totalElements) {\r\n            this.totalPages = Math.ceil(data.data.totalElements / this.itemsPerPage);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('❌ Error fetching notices:', error);\r\n        this.notices = [];\r\n      }\r\n    },\r\n    goToNotice(noticeUUID) {\r\n      const currentPath = this.$route.path;\r\n      if (currentPath.startsWith('/adminmain')) {\r\n        this.$router.push({ name: 'AdminNoticeClick', params: { noticeUUID: noticeUUID } });\r\n      } else {\r\n        this.$router.push({ name: 'AdminNoticeClick', params: { noticeUUID: noticeUUID } });\r\n      }\r\n    },\r\n    changePage(page) {\r\n      if (page >= 1 && page <= this.totalPages) {\r\n        this.currentPage = page;\r\n        this.fetchNotices();\r\n      }\r\n    },\r\n    previousPage() {\r\n      if (this.currentPage > 1) {\r\n        this.changePage(this.currentPage - 1);\r\n      }\r\n    },\r\n    nextPage() {\r\n      if (this.currentPage < this.totalPages) {\r\n        this.changePage(this.currentPage + 1);\r\n      }\r\n    },\r\n    nextPageGroup() {\r\n      if (this.showNextGroup) {\r\n        this.changePage(this.endPage + 1);\r\n      }\r\n    },\r\n    prevPageGroup() {\r\n      if (this.showPrevGroup) {\r\n        this.changePage(this.startPage - 1);\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchNotices();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.title {\r\n  color: black;\r\n  font-size: clamp(18px, 4vw, 25px);\r\n  font-weight: bold;\r\n  margin-bottom: 10px;\r\n  position: relative;\r\n  display: inline-block;\r\n  z-index: 1;\r\n}\r\n\r\n* {\r\n  box-sizing: border-box;\r\n}\r\n\r\n.container {\r\n  display: flex;\r\n  min-width: 390px;\r\n  overflow-x: hidden;\r\n}\r\n\r\n.contents {\r\n  flex: 1;\r\n}\r\n\r\n.notices {\r\n  width: 100%;\r\n  max-width: 820px;\r\n  min-width: 390px;\r\n  height: auto;\r\n  border-radius: 10px;\r\n  background-color: #fff;\r\n  padding: 20px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  margin: 0 auto;\r\n}\r\n\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  table-layout: fixed;\r\n}\r\n\r\n.title-column {\r\n  width: 60%;\r\n  font-size: clamp(15px, 3.24vw, 21.6px);\r\n}\r\n\r\n.author-column {\r\n  width: 20%;\r\n  font-size: clamp(13px, 2.76vw, 18.4px);\r\n}\r\n\r\n.date-column {\r\n  width: 20%;\r\n  font-size: clamp(13px, 2.76vw, 18.4px);\r\n}\r\n\r\nth {\r\n  padding: 10px;\r\n  border-bottom: 2px solid #ddd;\r\n  text-align: center;\r\n  background-color: white;\r\n  font-family: Pretendard;\r\n  font-size: clamp(14px, 3vw, 20px);\r\n  font-weight: 700;\r\n  line-height: 23.87px;\r\n  color: #393939;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\ntd {\r\n  padding: 10px;\r\n  border-bottom: 1px solid #ddd;\r\n  text-align: center;\r\n  background-color: white;\r\n  word-wrap: break-word;\r\n  vertical-align: middle;\r\n}\r\n\r\ntd.title-column {\r\n  font-size: clamp(15px, 3.24vw, 21.6px);\r\n}\r\n\r\ntd.author-column {\r\n  font-size: clamp(13px, 2.76vw, 18.4px);\r\n}\r\n\r\ntd.date-column {\r\n  font-size: clamp(13px, 2.76vw, 18.4px);\r\n}\r\n\r\n.title-button {\r\n  width: 100%;\r\n  text-align: center;\r\n  white-space: normal;\r\n  line-height: 1.4;\r\n  padding: 5px 0;\r\n}\r\n\r\nbutton {\r\n  background: none;\r\n  border: none;\r\n  cursor: pointer;\r\n  font-size: clamp(12px, 2.5vw, 16px);\r\n}\r\n\r\nbutton:hover {\r\n  text-decoration: underline;\r\n}\r\n\r\n.pagination {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.pagination .arrow-button {\r\n  opacity: 1;\r\n}\r\n\r\n.pagination .arrow-button:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.pagination button {\r\n  width: 30px;\r\n  height: 30px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background: none;\r\n  cursor: pointer;\r\n  margin: 0 5px;\r\n  padding: 5px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.pagination button.active {\r\n  color: #FFC700;\r\n  transform: scale(1.2);\r\n}\r\n\r\n.pagination img {\r\n  width: 10px;\r\n  height: 10px;\r\n}\r\n\r\n</style>","import { render } from \"./notice.vue?vue&type=template&id=3be029de&scoped=true\"\nimport script from \"./notice.vue?vue&type=script&lang=js\"\nexport * from \"./notice.vue?vue&type=script&lang=js\"\n\nimport \"./notice.vue?vue&type=style&index=0&id=3be029de&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3be029de\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","$data","notices","length","_createElementBlock","_hoisted_4","_cache","colspan","_Fragment","_renderList","notice","key","noticeUUID","_hoisted_5","onClick","$event","$options","goToNotice","adminName","noticeTitle","_hoisted_6","_hoisted_7","_toDisplayString","_hoisted_8","Date","noticeCreatedAt","toLocaleDateString","_hoisted_9","args","prevPageGroup","disabled","showPrevGroup","src","_imports_0","alt","totalPagesArray","page","changePage","_normalizeClass","active","currentPage","_hoisted_11","nextPageGroup","showNextGroup","_imports_1","show401Popup","_createBlock","_component_Popup401","components","Popup401","data","itemsPerPage","totalPages","pageGroupSize","computed","currentPageGroup","Math","ceil","this","startPage","endPage","end","min","pages","i","push","mounted","initializePage","methods","isFirstVisit","localStorage","getItem","reloaded","sessionStorage","setItem","window","location","reload","removeItem","fetchNotices","max","accessToken","store","state","response","fetch","apiBaseUrl","method","headers","status","json","Array","isArray","content","totalElements","error","console","currentPath","$route","path","startsWith","$router","name","params","previousPage","nextPage","created","__exports__","render"],"sourceRoot":""}