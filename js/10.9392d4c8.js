"use strict";(self["webpackChunkdonggurami"]=self["webpackChunkdonggurami"]||[]).push([[10],{8010:function(t,e,a){a.r(e),a.d(e,{default:function(){return X}});var s=a(6768),o=a(4232),i=a(5039),n=a(6392);const r={class:"container"},c={class:"contents"},l={class:"notices"},u={key:0},g={class:"title-column"},h=["onClick"],d={class:"author-column"},P={class:"date-column"},p={class:"notice-cards"},k={key:0,class:"no-notices-card"},m=["onClick"],v={class:"card-title"},L={class:"card-meta"},C={class:"card-author"},w={class:"card-date"},G={class:"pagination"},f=["disabled"],b=["onClick"],I=["disabled"];function N(t,e,a,N,y,E){const S=(0,s.g2)("Popup401");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",r,[(0,s.Lk)("div",c,[e[6]||(e[6]=(0,s.Lk)("h2",{class:"title"},"공지사항",-1)),(0,s.Lk)("div",l,[(0,s.Lk)("table",null,[e[3]||(e[3]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{class:"title-column"},"제목"),(0,s.Lk)("th",{class:"author-column"},"작성자"),(0,s.Lk)("th",{class:"date-column"},"작성일")])],-1)),(0,s.Lk)("tbody",null,[0===y.notices.length?((0,s.uX)(),(0,s.CE)("tr",u,e[2]||(e[2]=[(0,s.Lk)("td",{colspan:"3"},"공지사항이 없습니다.",-1)]))):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(y.notices,t=>((0,s.uX)(),(0,s.CE)("tr",{key:t.noticeUUID},[(0,s.Lk)("td",g,[(0,s.Lk)("button",{onClick:e=>E.goToNotice(t.noticeUUID,t.adminName),class:"title-button"},(0,o.v_)(t.noticeTitle),9,h)]),(0,s.Lk)("td",d,(0,o.v_)(t.adminName),1),(0,s.Lk)("td",P,(0,o.v_)(new Date(t.noticeCreatedAt).toLocaleDateString("ko-KR")),1)]))),128))])]),(0,s.Lk)("div",p,[0===y.notices.length?((0,s.uX)(),(0,s.CE)("div",k," 공지사항이 없습니다. ")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(y.notices,t=>((0,s.uX)(),(0,s.CE)("div",{key:t.noticeUUID,class:"notice-card",onClick:e=>E.goToNotice(t.noticeUUID,t.adminName)},[(0,s.Lk)("div",v,(0,o.v_)(t.noticeTitle),1),(0,s.Lk)("div",L,[(0,s.Lk)("span",C,(0,o.v_)(t.adminName),1),(0,s.Lk)("span",w,(0,o.v_)(new Date(t.noticeCreatedAt).toLocaleDateString("ko-KR")),1)])],8,m))),128))]),(0,s.Lk)("div",G,[(0,s.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>E.prevPageGroup&&E.prevPageGroup(...t)),disabled:!E.showPrevGroup,class:"arrow-button"},e[4]||(e[4]=[(0,s.Lk)("img",{src:i,alt:"Previous"},null,-1)]),8,f),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(E.totalPagesArray,t=>((0,s.uX)(),(0,s.CE)("button",{key:t,onClick:e=>E.changePage(t),class:(0,o.C4)({active:y.currentPage===t})},(0,o.v_)(t),11,b))),128)),(0,s.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>E.nextPageGroup&&E.nextPageGroup(...t)),disabled:!E.showNextGroup,class:"arrow-button"},e[5]||(e[5]=[(0,s.Lk)("img",{src:n,alt:"Next"},null,-1)]),8,I)])])])]),y.show401Popup?((0,s.uX)(),(0,s.Wv)(S,{key:0})):(0,s.Q3)("",!0)],64)}var y=a(5968),E=a(1720),S={components:{Popup401:E.A},data(){return{notices:[],currentPage:1,itemsPerPage:12,totalPages:1,show401Popup:!1,pageGroupSize:5}},computed:{currentPageGroup(){return Math.ceil(this.currentPage/this.pageGroupSize)},startPage(){return(this.currentPageGroup-1)*this.pageGroupSize+1},endPage(){const t=this.startPage+this.pageGroupSize-1;return Math.min(t,this.totalPages)},totalPagesArray(){let t=[];for(let e=this.startPage;e<=this.endPage;e++)t.push(e);return t},showNextGroup(){return this.endPage<this.totalPages},showPrevGroup(){return this.startPage>1}},mounted(){this.initializePage()},methods:{initializePage(){const t=null===localStorage.getItem("firstVisit"),e=sessionStorage.getItem("reloaded");t?(localStorage.setItem("firstVisit","true"),sessionStorage.setItem("reloaded","true"),window.location.reload()):e?sessionStorage.removeItem("reloaded"):(sessionStorage.setItem("reloaded","true"),window.location.reload())},async fetchNotices(){try{const t=y.A.state.accessToken,e=await fetch(`${y.A.state.apiBaseUrl}/notices?page=${this.currentPage-1}&size=${this.itemsPerPage}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(401===e.status)return void(this.show401Popup=!0);const a=await e.json();a&&a.data&&(this.notices=Array.isArray(a.data.content)?a.data.content:[],a.data.totalElements&&(this.totalPages=Math.ceil(a.data.totalElements/this.itemsPerPage)))}catch(t){console.error("❌ Error fetching notices:",t),this.notices=[]}},goToNotice(t){this.$router.push({name:"NoticeClick",params:{noticeUUID:t}})},changePage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t,this.fetchNotices())},previousPage(){this.currentPage>1&&this.changePage(this.currentPage-1)},nextPage(){this.currentPage<this.totalPages&&this.changePage(this.currentPage+1)},nextPageGroup(){this.showNextGroup&&this.changePage(this.endPage+1)},prevPageGroup(){this.showPrevGroup&&this.changePage(this.startPage-1)}},created(){this.fetchNotices()}},A=a(1241);const U=(0,A.A)(S,[["render",N],["__scopeId","data-v-6afe03aa"]]);var X=U}}]);
//# sourceMappingURL=10.9392d4c8.js.map