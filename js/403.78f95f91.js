"use strict";(self["webpackChunkdonggurami"]=self["webpackChunkdonggurami"]||[]).push([[403],{8403:function(e,s,t){t.r(s),t.d(s,{default:function(){return Y}});var r=t(6768),o=t(4232),n=t(5130);const a={class:"duplicate-container"},i={class:"form-container"},p={class:"form-content-wrapper"},l={class:"form-content"},u={class:"input-group"},d={class:"input-group"},c={class:"input-group phone-number"},m=["disabled"],h={key:0,class:"error-text"},v={key:0,class:"duplicate-list-section"},b={class:"duplicate-list-header"},k={class:"header-content"},g={class:"duplicate-list-title"},L={class:"member-count"},w={class:"member-list-wrapper"},M={class:"member-list"},f={class:"member-info"},E={class:"info-cell name1"},I={class:"info-cell student-id"},C={class:"info-cell phone1"};function P(e,s,t,P,F,N){const y=(0,r.g2)("AddPopup"),S=(0,r.g2)("SuccessFailPopup"),A=(0,r.g2)("Popup401");return(0,r.uX)(),(0,r.CE)("div",a,[s[13]||(s[13]=(0,r.Lk)("div",{class:"title"},[(0,r.Lk)("h2",{class:"duplicate-title"},"프로필 중복 회원 추가"),(0,r.Lk)("p",{class:"duplicate-subtitle"}," 동아리 회원을 추가할 때 중복되었던 회원을 추가해주세요. ")],-1)),(0,r.Lk)("div",i,[(0,r.Lk)("div",p,[(0,r.Lk)("div",l,[(0,r.Lk)("div",u,[s[7]||(s[7]=(0,r.Lk)("label",null,"이름",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>F.name=e),placeholder:"이름 입력",class:(0,o.C4)({"error-input":F.nameError}),onInput:s[1]||(s[1]=(...e)=>N.validateForm&&N.validateForm(...e))},null,34),[[n.Jo,F.name]])]),(0,r.Lk)("div",d,[s[8]||(s[8]=(0,r.Lk)("label",null,"학번",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=e=>F.studentId=e),placeholder:"숫자 8자리",class:(0,o.C4)({"error-input":F.studentIdError}),onInput:s[3]||(s[3]=(...e)=>N.validateForm&&N.validateForm(...e))},null,34),[[n.Jo,F.studentId]])]),(0,r.Lk)("div",c,[s[9]||(s[9]=(0,r.Lk)("label",null,"전화번호",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":s[4]||(s[4]=e=>F.phoneNumber=e),placeholder:"- 제외 11자리 숫자",class:(0,o.C4)({"error-input":F.phoneNumberError}),onInput:s[5]||(s[5]=(...e)=>N.validateForm&&N.validateForm(...e))},null,34),[[n.Jo,F.phoneNumber]])]),(0,r.Lk)("button",{onClick:s[6]||(s[6]=(...e)=>N.handleAddMember&&N.handleAddMember(...e)),class:(0,o.C4)(["add-button",{disabled:!F.isFormValid}]),disabled:!F.isFormValid},s[10]||(s[10]=[(0,r.Lk)("svg",{class:"add-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},[(0,r.Lk)("path",{fill:"#FFFFFF",d:"M19 11h-6V5h-2v6H5v2h6v6h2v-6h6z"})],-1),(0,r.eW)(" 동아리 회원 추가 ")]),10,m)]),F.showError?((0,r.uX)(),(0,r.CE)("p",h," * 입력 정보를 다시 확인해주세요. (이름:숫자 특수기호 제외, 학번: 8자리 숫자, 전화번호: - 제외 11자리 숫자) ")):(0,r.Q3)("",!0)])]),N.hasOverlappingMembers?((0,r.uX)(),(0,r.CE)("div",v,[(0,r.Lk)("div",b,[(0,r.Lk)("div",k,[(0,r.Lk)("h3",g,[s[11]||(s[11]=(0,r.eW)(" 조회된 프로필 중복 회원 목록 ")),(0,r.Lk)("span",L,"총 "+(0,o.v_)(N.overlappingMembersCount)+"명",1)]),s[12]||(s[12]=(0,r.Lk)("p",{class:"list-subtitle"}," 현재 페이지를 벗어나시면 하단 목록을 다시 확인하실 수 없습니다. ",-1))])]),(0,r.Lk)("div",w,[(0,r.Lk)("div",M,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.OverlappingMembers,(e,s)=>((0,r.uX)(),(0,r.CE)("div",{key:s,class:"member-item"},[(0,r.Lk)("div",f,[(0,r.Lk)("span",E,(0,o.v_)(e.userName),1),(0,r.Lk)("span",I,(0,o.v_)(e.studentNumber),1),(0,r.Lk)("span",C,(0,o.v_)(N.formatPhoneNumber(e.userHp)),1)])]))),128))])])])):(0,r.Q3)("",!0),F.showPopup?((0,r.uX)(),(0,r.Wv)(y,{key:1,name:F.name,studentId:F.studentId,phoneNumber:F.phoneNumber,onConfirm:N.confirmAdd,onCancel:N.cancelAdd},null,8,["name","studentId","phoneNumber","onConfirm","onCancel"])):(0,r.Q3)("",!0),F.showResultPopup?((0,r.uX)(),(0,r.Wv)(S,{key:2,isSuccess:F.isSuccess,serverMessage:F.serverMessage,onClose:N.closeResultPopup},null,8,["isSuccess","serverMessage","onClose"])):(0,r.Q3)("",!0),F.show401Popup?((0,r.uX)(),(0,r.Wv)(A,{key:3})):(0,r.Q3)("",!0)])}var F=t(5968);const N={class:"popup-overlay"},y={class:"popup-container"},S={class:"info-row"},A={class:"info-row"},O={class:"info-row"},_={class:"popup-footer"},$={class:"button-group"};function V(e,s,t,n,a,i){return(0,r.uX)(),(0,r.CE)("div",N,[(0,r.Lk)("div",y,[s[2]||(s[2]=(0,r.Lk)("h2",{class:"popup-title"},"동아리 회원 추가",-1)),s[3]||(s[3]=(0,r.Lk)("div",{class:"popup-separator"},null,-1)),(0,r.Lk)("div",S,[(0,r.Lk)("span",null,"이름: "+(0,o.v_)(t.name),1)]),(0,r.Lk)("div",A,[(0,r.Lk)("span",null,"학번: "+(0,o.v_)(t.studentId),1)]),(0,r.Lk)("div",O,[(0,r.Lk)("span",null,"전화번호: "+(0,o.v_)(t.phoneNumber),1)]),s[4]||(s[4]=(0,r.Lk)("p",{class:"confirmation-text"},"해당 회원을 동아리에 추가하시겠습니까?",-1)),(0,r.Lk)("div",_,[(0,r.Lk)("div",$,[(0,r.Lk)("button",{onClick:s[0]||(s[0]=s=>e.$emit("cancel")),class:"cancel-button"},"취소"),(0,r.Lk)("button",{onClick:s[1]||(s[1]=s=>e.$emit("confirm")),class:"confirm-button"},"확인")])])])])}var X={name:"AddPopup",props:{name:{type:String,required:!0},studentId:{type:String,required:!0},phoneNumber:{type:String,required:!0}}},x=t(1241);const R=(0,x.A)(X,[["render",V],["__scopeId","data-v-bae82338"]]);var D=R;const H={class:"popup-overlay"},T={class:"popup-container"},U=["innerHTML"],q={class:"button-group"};function J(e,s,t,o,n,a){return(0,r.uX)(),(0,r.CE)("div",H,[(0,r.Lk)("div",T,[s[1]||(s[1]=(0,r.Lk)("h3",{class:"popup-title"},"동아리 회원 추가",-1)),s[2]||(s[2]=(0,r.Lk)("div",{class:"popup-separator"},null,-1)),(0,r.Lk)("p",{class:"message",innerHTML:a.message},null,8,U),(0,r.Lk)("div",q,[(0,r.Lk)("button",{onClick:s[0]||(s[0]=s=>e.$emit("close")),class:"confirm-button"},"확인")])])])}var Q={name:"SuccessFailPopup",props:{isSuccess:{type:Boolean,required:!0},serverMessage:{type:String,required:!0}},computed:{message(){return this.serverMessage}}};const W=(0,x.A)(Q,[["render",J],["__scopeId","data-v-4880824a"]]);var B=W,z=t(4373),j=t(1720),K=t(782),Z={name:"DuplicateMember",components:{AddPopup:D,SuccessFailPopup:B,Popup401:j.A},computed:{...(0,K.aH)(["OverlappingMembers"]),hasOverlappingMembers(){return this.OverlappingMembers&&this.OverlappingMembers.length>0},overlappingMembersCount(){return this.OverlappingMembers?this.OverlappingMembers.length:0}},data(){return{name:"",studentId:"",phoneNumber:"",showPopup:!1,showError:!1,isFormValid:!1,showResultPopup:!1,isSuccess:!1,nameError:!1,studentIdError:!1,phoneNumberError:!1,serverMessage:"",DuplicateMember:[],show401Popup:!1}},mounted(){const e=localStorage.getItem("saveDuplicateMember");e&&(this.OverlappingMembers=JSON.parse(e)),console.log("전달받은 회원 데이터:",this.OverlappingMembers)},methods:{handle401Error(e){return!(!e.response||401!==e.response.status)&&(this.show401Popup=!0,!0)},saveDuplicateMember(){localStorage.setItem("saveDuplicateMember",JSON.stringify(this.OverlappingMembers))},validateForm(){const e=/^[가-힣a-zA-Z\s]+$/.test(this.name)&&""!==this.name.trim(),s=/^\d{8}$/.test(this.studentId),t=/^\d{11}$/.test(this.phoneNumber);this.nameError=this.name&&!e,this.studentIdError=this.studentId&&!s,this.phoneNumberError=this.phoneNumber&&!t,this.showError=this.nameError||this.studentIdError||this.phoneNumberError,this.isFormValid=e&&s&&t},handleAddMember(){this.isFormValid&&(this.showPopup=!0)},async confirmAdd(){try{await this.sendToServer(),this.isSuccess=!0,this.serverMessage="해당 회원의 추가가 정상적으로 처리되었습니다."}catch(e){console.error("Error adding member:",e),this.isSuccess=!1,e.response&&e.response.data&&e.response.data.message?this.serverMessage=e.response.data.message:this.serverMessage="서버 오류가 발생했습니다. 다시 시도해주세요."}this.showPopup=!1,this.showResultPopup=!0},cancelAdd(){this.showPopup=!1},async sendToServer(){const e={userName:this.name,studentNumber:this.studentId,userHp:this.phoneNumber},s=F.A.state.accessToken,t=F.A.state.clubUUID;try{const r=await z.A.post(`${F.A.state.apiBaseUrl}/club-leader/${t}/members/duplicate-profiles`,e,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});return console.log("서버 응답:",r.data),r.data}catch(r){throw r.response&&401===r.response.status?this.show401Popup=!0:!r.response||400!==r.response.status&&404!==r.response.status||(this.isSuccess=!1,this.serverMessage=r.response.data.message||"요청 처리 중 오류가 발생했습니다.",this.showResultPopup=!0),r}},closeResultPopup(){this.showResultPopup=!1,this.isSuccess&&this.resetForm()},resetForm(){this.name="",this.studentId="",this.phoneNumber="",this.showError=!1,this.nameError=!1,this.studentIdError=!1,this.phoneNumberError=!1,this.isFormValid=!1},formatPhoneNumber(e){return e?e.replace(/(\d{3})(\d{4})(\d{4})/,"$1-$2-$3"):""}}};const G=(0,x.A)(Z,[["render",P],["__scopeId","data-v-ee1d51d2"]]);var Y=G}}]);
//# sourceMappingURL=403.78f95f91.js.map