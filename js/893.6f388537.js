"use strict";(self["webpackChunkdonggurami"]=self["webpackChunkdonggurami"]||[]).push([[893],{893:function(e,s,l){l.r(s),l.d(s,{default:function(){return H}});var t=l(6768),a=l(4232);const r={id:"RemoveMemberDashboard",class:"RemoveMemberDashboard"},c={class:"member-list"},o={class:"custom-checkbox"},n=["checked","onChange"],u={class:"member-info"},p={class:"member-name"},m={class:"member-studentId"},b={class:"member-major"},i={class:"member-phone"},d={class:"expulsion-header"},h={class:"selected-count"},k={class:"selected-count-bold"},L=["disabled"],M={class:"expulsion-section"},v={class:"expulsion-list"},U={class:"member-info"},x={class:"member-name"},g={class:"member-studentId"},C={class:"member-major"},D={class:"member-phone"},I={key:0,class:"custom-popup1"},f={class:"popup-content1"},E={class:"popup-body1"},w={class:"popup-message1"},y={class:"red-text1"};function A(e,s,l,A,P,_){const $=(0,t.g2)("Popup401");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("div",null,[s[10]||(s[10]=(0,t.Lk)("h2",{class:"title"},"회원 퇴출하기",-1)),(0,t.Lk)("div",r,[(0,t.Lk)("div",c,[(0,t.Lk)("ul",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(_.formattedClubMembers,e=>((0,t.uX)(),(0,t.CE)("li",{key:e.clubMemberUUID,class:"member-item"},[(0,t.Lk)("label",o,[(0,t.Lk)("input",{type:"checkbox",checked:P.selectedMembers.includes(e),onChange:s=>_.toggleMemberSelection(e),class:"hidden-checkbox"},null,40,n),s[3]||(s[3]=(0,t.Lk)("span",{class:"checkbox-mark"},null,-1))]),(0,t.Lk)("div",u,[(0,t.Lk)("span",p,(0,a.v_)(e.userName),1),(0,t.Lk)("span",m,(0,a.v_)(e.studentNumber),1),(0,t.Lk)("span",b,(0,a.v_)(e.major),1),(0,t.Lk)("span",i,(0,a.v_)(e.userHp),1)])]))),128))])])]),(0,t.Lk)("div",d,[(0,t.Lk)("span",h,[s[4]||(s[4]=(0,t.eW)("퇴출 선택 인원 ")),(0,t.Lk)("span",k,"총 "+(0,a.v_)(P.selectedMembers.length)+"명",1)]),(0,t.Lk)("button",{onClick:s[0]||(s[0]=e=>P.showExpulsionPopup=!0),class:"expulsion-button",disabled:!P.selectedMembers.length}," 퇴출하기 ",8,L)]),(0,t.Lk)("div",M,[(0,t.Lk)("div",v,[(0,t.Lk)("ul",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(P.selectedMembers,e=>((0,t.uX)(),(0,t.CE)("li",{key:e.clubMemberUUID,class:"member-item"},[(0,t.Lk)("div",U,[(0,t.Lk)("span",x,(0,a.v_)(e.userName),1),(0,t.Lk)("span",g,(0,a.v_)(e.studentNumber),1),(0,t.Lk)("span",C,(0,a.v_)(e.major),1),(0,t.Lk)("span",D,(0,a.v_)(e.userHp),1)])]))),128))])])]),P.showExpulsionPopup?((0,t.uX)(),(0,t.CE)("div",I,[(0,t.Lk)("div",f,[s[8]||(s[8]=(0,t.Lk)("div",{class:"popup-header1"},[(0,t.Lk)("p",{class:"popup-title1"},"동아리 회원 퇴출")],-1)),s[9]||(s[9]=(0,t.Lk)("div",{class:"popup-separator1"},null,-1)),(0,t.Lk)("div",E,[(0,t.Lk)("p",w,[(0,t.Lk)("span",y,"총 "+(0,a.v_)(P.selectedMembers.length)+"명",1),s[5]||(s[5]=(0,t.eW)("입니다. "))]),s[6]||(s[6]=(0,t.Lk)("p",{class:"popup-message1"},"해당 동아리원들을 퇴출하시겠습니까?",-1)),s[7]||(s[7]=(0,t.Lk)("p",{class:"popup-warning1"}," 퇴출 후 되돌릴 수 없으니 신중하게 선택해 주세요. ",-1))]),(0,t.Lk)("button",{onClick:s[1]||(s[1]=e=>P.showExpulsionPopup=!1),class:"cancel-button"}," 취소 "),(0,t.Lk)("button",{onClick:s[2]||(s[2]=(...e)=>_.expelMember&&_.expelMember(...e)),class:"expel-button"},"확인")])])):(0,t.Q3)("",!0)]),P.show401Popup?((0,t.uX)(),(0,t.Wv)($,{key:0})):(0,t.Q3)("",!0)],64)}var P=l(4373),_=l(5968),$=l(1720),X={name:"RemoveMemberDashboard",components:{Popup401:$.A},data(){return{clubMembers:[],showExpulsionPopup:!1,selectedMembers:[],show401Popup:!1}},computed:{formattedClubMembers(){return this.clubMembers?this.clubMembers.map(e=>({...e,userHp:e.userHp.replace(/(\d{3})(\d{4})(\d{4})/,"$1-$2-$3")})):[]}},mounted(){this.fetchData()},methods:{handle401Error(e){return!(!e.response||401!==e.response.status)&&(this.show401Popup=!0,!0)},async fetchData(){const e=_.A.state.accessToken,s=_.A.state.clubUUID;try{const l=await P.A.get(`${_.A.state.apiBaseUrl}/club-leader/${s}/members?=null`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});this.clubMembers=l.data.data}catch(l){this.handle401Error(l)||(console.error("동아리 정보를 불러오는데 실패했습니다.",l),alert("동아리 정보를 불러오는데 실패했습니다."))}},toggleMemberSelection(e){const s=this.selectedMembers.findIndex(s=>s.clubMemberUUID===e.clubMemberUUID);-1===s?this.selectedMembers.push(e):this.selectedMembers.splice(s,1)},async expelMember(){const e=_.A.state.accessToken,s=_.A.state.clubUUID;try{const l=this.selectedMembers.map(e=>({clubMemberUUID:e.clubMemberUUID}));await P.A.delete(`${_.A.state.apiBaseUrl}/club-leader/${s}/members`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},data:l}),this.clubMembers=this.clubMembers.filter(e=>!this.selectedMembers.some(s=>s.clubMemberUUID===e.clubMemberUUID)),this.selectedMembers=[],this.showExpulsionPopup=!1}catch(l){this.handle401Error(l)||(console.error("동아리 정보를 불러오는데 실패했습니다.",l),alert("동아리 정보를 불러오는데 실패했습니다."))}}}},j=l(1241);const B=(0,j.A)(X,[["render",A]]);var H=B}}]);
//# sourceMappingURL=893.6f388537.js.map