"use strict";(self["webpackChunkdonggurami"]=self["webpackChunkdonggurami"]||[]).push([[185],{7185:function(t,e,a){a.r(e),a.d(e,{default:function(){return y}});var s=a(6768),o=a(4232),r=a(5039),i=a(6392);const n={class:"container"},c={class:"contents"},u={class:"notices"},l={key:0},h={class:"title-column"},g=["onClick"],P={class:"author-column"},d={class:"date-column"},p={class:"pagination"},m=["disabled"],k=["onClick"],v=["disabled"];function L(t,e,a,L,w,G){const C=(0,s.g2)("Popup401");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",n,[(0,s.Lk)("div",c,[e[6]||(e[6]=(0,s.Lk)("h2",{class:"title"},"공지사항",-1)),(0,s.Lk)("div",u,[(0,s.Lk)("table",null,[e[3]||(e[3]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{class:"title-column"},"제목"),(0,s.Lk)("th",{class:"author-column"},"작성자"),(0,s.Lk)("th",{class:"date-column"},"작성일")])],-1)),(0,s.Lk)("tbody",null,[0===w.notices.length?((0,s.uX)(),(0,s.CE)("tr",l,e[2]||(e[2]=[(0,s.Lk)("td",{colspan:"3"},"공지사항이 없습니다.",-1)]))):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(w.notices,t=>((0,s.uX)(),(0,s.CE)("tr",{key:t.noticeUUID},[(0,s.Lk)("td",h,[(0,s.Lk)("button",{onClick:e=>G.goToNotice(t.noticeUUID,t.adminName),class:"title-button"},(0,o.v_)(t.noticeTitle),9,g)]),(0,s.Lk)("td",P,(0,o.v_)(t.adminName),1),(0,s.Lk)("td",d,(0,o.v_)(new Date(t.noticeCreatedAt).toLocaleDateString("ko-KR")),1)]))),128))])]),(0,s.Lk)("div",p,[(0,s.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>G.prevPageGroup&&G.prevPageGroup(...t)),disabled:!G.showPrevGroup,class:"arrow-button"},e[4]||(e[4]=[(0,s.Lk)("img",{src:r,alt:"Previous"},null,-1)]),8,m),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(G.totalPagesArray,t=>((0,s.uX)(),(0,s.CE)("button",{key:t,onClick:e=>G.changePage(t),class:(0,o.C4)({active:w.currentPage===t})},(0,o.v_)(t),11,k))),128)),(0,s.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>G.nextPageGroup&&G.nextPageGroup(...t)),disabled:!G.showNextGroup,class:"arrow-button"},e[5]||(e[5]=[(0,s.Lk)("img",{src:i,alt:"Next"},null,-1)]),8,v)])])])]),w.show401Popup?((0,s.uX)(),(0,s.Wv)(C,{key:0})):(0,s.Q3)("",!0)],64)}var w=a(5968),G=a(6799),C={components:{Popup401:G.A},data(){return{notices:[],currentPage:1,itemsPerPage:12,totalPages:1,show401Popup:!1,pageGroupSize:5}},computed:{currentPageGroup(){return Math.ceil(this.currentPage/this.pageGroupSize)},startPage(){return(this.currentPageGroup-1)*this.pageGroupSize+1},endPage(){const t=this.startPage+this.pageGroupSize-1;return Math.min(t,this.totalPages)},totalPagesArray(){let t=[];for(let e=this.startPage;e<=this.endPage;e++)t.push(e);return t},showNextGroup(){return this.endPage<this.totalPages},showPrevGroup(){return this.startPage>1}},mounted(){this.initializePage()},methods:{initializePage(){const t=null===localStorage.getItem("firstVisit"),e=sessionStorage.getItem("reloaded");t?(localStorage.setItem("firstVisit","true"),sessionStorage.setItem("reloaded","true"),window.location.reload()):e?sessionStorage.removeItem("reloaded"):(sessionStorage.setItem("reloaded","true"),window.location.reload())},async fetchNotices(){Math.max(this.itemsPerPage,1),Math.max(this.currentPage-1,0);try{const t=w.A.state.accessToken,e=await fetch(`${w.A.state.apiBaseUrl}/notices?page=${this.currentPage-1}&size=${this.itemsPerPage}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(401===e.status)return void(this.show401Popup=!0);const a=await e.json();a&&a.data&&(this.notices=Array.isArray(a.data.content)?a.data.content:[],a.data.totalElements&&(this.totalPages=Math.ceil(a.data.totalElements/this.itemsPerPage)))}catch(t){console.error("❌ Error fetching notices:",t),this.notices=[]}},goToNotice(t){const e=this.$route.path;e.startsWith("/adminmain"),this.$router.push({name:"AdminNoticeClick",params:{noticeUUID:t}})},changePage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t,this.fetchNotices())},previousPage(){this.currentPage>1&&this.changePage(this.currentPage-1)},nextPage(){this.currentPage<this.totalPages&&this.changePage(this.currentPage+1)},nextPageGroup(){this.showNextGroup&&this.changePage(this.endPage+1)},prevPageGroup(){this.showPrevGroup&&this.changePage(this.startPage-1)}},created(){this.fetchNotices()}},b=a(1241);const f=(0,b.A)(C,[["render",L],["__scopeId","data-v-155e2c49"]]);var y=f}}]);
//# sourceMappingURL=185.31bfa90e.js.map